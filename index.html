<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Оглавление | PM FAQ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 0;
    }

    .toc-container {
      max-width: 800px;
      margin: 20px auto;
      padding: 16px;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .chapter {
      background-color: #CCE5FF;
      color: #003366;
      padding: 12px 16px;
      cursor: pointer;
      font-weight: bold;
      border-radius: 8px;
      margin-top: 10px;
      transition: background-color 0.3s;
    }

    .chapter:hover {
      background-color: #b3d7ff;
    }

    .subchapters {
      overflow: hidden;
      max-height: 0;
      transition: max-height 0.4s ease-out, opacity 0.4s ease-out;
      opacity: 0;
    }

    .subchapters.open {
      max-height: 1000px;
      opacity: 1;
    }

    .subchapter {
      background-color: #E6F0FF;
      color: #003366;
      padding: 10px 16px;
      cursor: pointer;
      margin: 6px 0;
      border-radius: 6px;
      transition: background-color 0.3s;
    }

    .subchapter:hover {
      background-color: #d6e9ff;
    }

    .posts {
      overflow: hidden;
      max-height: 0;
      transition: max-height 0.4s ease-out, opacity 0.4s ease-out;
      opacity: 0;
      padding-left: 20px;
    }

    .posts.open {
      max-height: 1000px;
      opacity: 1;
    }

    .post-link {
      display: block;
      padding: 6px 0;
      color: #0066cc;
      text-decoration: none;
      transition: color 0.2s;
    }

    .post-link:hover {
      color: #004999;
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .toc-container {
        padding: 12px;
      }
      .chapter, .subchapter {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="toc-container" id="toc"></div>

  <script>
    const arrowSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 9l6 6 6-6"/></svg>`;

    const tocData = [
      {
        title: "Глава 1: Кто такой продуктовый менеджер?",
        id: "chapter1",
        subchapters: [
          {
            title: "Роль PM в команде",
            id: "sub1_1",
            posts: [
              { title: "Какую ценность приносит продуктовый менеджер?", link: "https://t.me/pm_faq/6" },
              { title: "Чем product-менеджер отличается от project-менеджера, тимлида или бизнес-аналитика?", link: "https://t.me/pm_faq/9" },
              { title: "В каких ситуациях PM должен взять на себя инициативу, а когда — отойти в сторону?", link: "https://t.me/pm_faq/10" },
              { title: "Как PM взаимодействует с дизайнерами, разработчиками и бизнесом?", link: "https://t.me/pm_faq/11" },
              { title: "Что будет с командой, если нет хорошего PM?", link: "https://t.me/pm_faq/12" }
            ]
          },
          {
            title: "Типы продуктовых менеджеров",
            id: "sub1_2",
            posts: [
              { title: "Какие бывают роли и специализации у продуктовых менеджеров?", link: "https://t.me/pm_faq/13" },
              { title: "Как выбрать направление, если только начинаешь карьеру?", link: "https://t.me/pm_faq/15" },
              { title: "Может ли один человек совмещать сразу несколько продуктовых ролей?", link: "https://t.me/pm_faq/16" }
            ]
          },
          {
            title: "Мифы о профессии",
            id: "sub1_3",
            posts: [
              { title: "Почему существует мнение, что PM ничего не делает?", link: "https://t.me/pm_faq/17" },
              { title: "Какие распространённые заблуждения мешают новичкам?", link: "https://t.me/pm_faq/18" },
              { title: "Чем на самом деле занимается PM в течение рабочего дня?", link: "https://t.me/pm_faq/20" }
            ]
          },
          {
            title: "Портрет сильного PM",
            id: "sub1_4",
            posts: [
              { title: "Какими качествами должен обладать хороший PM?", link: "https://t.me/pm_faq/21" },
              { title: "Можно ли развить эмпатию, системность и продуктовое мышление?", link: "https://t.me/pm_faq/23" },
              { title: "Что делает PM, когда не знает ответа?", link: "https://t.me/pm_faq/24" },
              { title: "Как отличить сильного PM от просто активного?", link: "https://t.me/pm_faq/25" },
              { title: "Какие ошибки чаще всего совершают начинающие PM и как их избежать?", link: "https://t.me/pm_faq/26" }
            ]
          },
          {
            title: "Итог первой главы",
            id: "sub1_5",
            posts: [
              { title: "Итоги", link: "https://t.me/pm_faq/27" }
            ]
          }
        ]
      },
      {
        title: "Глава 2: Как попасть в профессию?",
        id: "chapter2",
        subchapters: [
          {
            title: "Образование",
            id: "sub2_1",
            posts: [
              { title: "Насколько важно профильное образование для начала карьеры PM?", link: "https://t.me/pm_faq/29" },
              { title: "Из какой профессии можно стать PM?", link: "https://t.me/pm_faq/30" },
              { title: "Какие курсы и книги полезны?", link: "https://t.me/pm_faq/31" },
              { title: "Какие навыки можно прокачать самостоятельно?", link: "https://t.me/pm_faq/32" }
            ]
          },
          {
            title: "Твой первый опыт",
            id: "sub2_2",
            posts: [
              { title: "Где и как искать возможности для первых проектов?", link: "https://t.me/pm_faq/33" },
              { title: "Какой опыт можно трансформировать в продуктовый?", link: "https://t.me/pm_faq/34" },
              { title: "Как запустить свой проект?", link: "https://t.me/pm_faq/35" },
              { title: "Как документировать результаты, чтобы они впечатлили работодателей?", link: "https://t.me/pm_faq/36" }
            ]
          },
          {
            title: "Портфолио и резюме",
            id: "sub2_3",
            posts: [
              { title: "Как составить и что стоит включить в резюме новичку?", link: "https://t.me/pm_faq/37" },
              { title: "Как описывать свой вклад и пользу?", link: "https://t.me/pm_faq/38" },
              { title: "Какие формулировки избегать в резюме?", link: "https://t.me/pm_faq/39" },
              { title: "Как адаптировать резюме под конкретную вакансию?", link: "https://t.me/pm_faq/40" }
            ]
          },
          {
            title: "Собеседования и кейсы",
            id: "sub2_4",
            posts: [
              { title: "Какие вопросы обычно задают на интервью для PM?", link: "https://t.me/pm_faq/41" },
              { title: "Как готовиться к разбору кейсов и задач?", link: "https://t.me/pm_faq/42" },
              { title: "Как подготовить примеры успешных решений?", link: "https://t.me/pm_faq/43" },
              { title: "Какие soft skills проверяют чаще всего?", link: "https://t.me/pm_faq/44" }
            ]
          },
          {
            title: "Итог второй главы",
            id: "sub2_5",
            posts: [
              { title: "Итог", link: "https://t.me/pm_faq/45" },
            ]
          }
        ]
      },
      {
        title: "Глава 3: Мышление и философия PM",
        id: "chapter3",
        subchapters: [
          {
            title: "Продуктовое мышление",
            id: "sub3_1",
            posts: [
              { title: "Какие методы помогают формировать продуктовое мышление?", link: "https://t.me/pm_faq/46" },
              { title: "Как определить ценность продукта для пользователя?", link: "https://t.me/pm_faq/47" },
              { title: "Как формулировать ценностное предложение продукта?", link: "https://t.me/pm_faq/48" },
              { title: "Какие вопросы помогают выявить ключевые потребности пользователей?", link: "https://t.me/pm_faq/49" },
              { title: "Как решать конфликт ценностей между бизнесом и пользователем?", link: "https://t.me/pm_faq/50" }
            ]
          },
          {
            title: "Системное мышление ✍️",
            id: "sub3_2",
            posts: [

            ]
          },
          {
            title: "Работа с неопределенностью ✍️",
            id: "sub3_3",
            posts: [

            ]
          },
          {
            title: "Эмпатия и коммуникация ✍️",
            id: "sub3_4",
            posts: [

            ]
          },
          {
            title: "Итог третьей главы ✍️",
            id: "sub3_5",
            posts: [

            ]
          }
        ]
      }
    ];

    const toc = document.getElementById("toc");

    function saveState(chapterIndex, subchapterIndex) {
      localStorage.setItem("tocState", JSON.stringify({ chapterIndex, subchapterIndex }));
    }

    function loadState() {
      try {
        return JSON.parse(localStorage.getItem("tocState")) || {};
      } catch {
        return {};
      }
    }

    const state = loadState();

    tocData.forEach((chapter, cIdx) => {
      const chapterEl = document.createElement("div");
      chapterEl.className = "chapter";
      chapterEl.textContent = chapter.title;
      toc.appendChild(chapterEl);

      const subchapterList = document.createElement("div");
      subchapterList.className = "subchapters";
      toc.appendChild(subchapterList);

      chapter.subchapters.forEach((subchapter, sIdx) => {
        const subchapterEl = document.createElement("div");
        subchapterEl.className = "subchapter";
        subchapterEl.textContent = subchapter.title;
        subchapterList.appendChild(subchapterEl);

        const postList = document.createElement("div");
        postList.className = "posts";
        subchapterList.appendChild(postList);

        subchapter.posts.forEach(post => {
          const postLink = document.createElement("a");
          postLink.className = "post-link";
          postLink.href = post.link;
          postLink.textContent = post.title;
          postLink.target = "_blank";
          postList.appendChild(postLink);
        });

        subchapterEl.addEventListener("click", () => {
          const isOpen = postList.classList.toggle("open");
          if (isOpen) saveState(cIdx, sIdx);
        });

        if (state.chapterIndex === cIdx && state.subchapterIndex === sIdx) {
          subchapterList.classList.add("open");
          postList.classList.add("open");
        }
      });

      chapterEl.addEventListener("click", () => {
        subchapterList.classList.toggle("open");
      });

      if (state.chapterIndex === cIdx) {
        subchapterList.classList.add("open");
      }
    });
  </script>
</body>
</html>
